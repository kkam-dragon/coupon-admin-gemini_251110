# 📘 COUFUN B2C 연동 매뉴얼 – 쿠폰취소 (Ver. 1.2)

**작성자:** ㈜티사이언티픽  
**최종 개정일:** 2020.08.21  
**문서 버전:** 1.2  

---

## 🕓 개정 이력

| 버전 | 개정일자 | 개정 내역 | 작성/개정자 | 확인자 |
|:----:|:----------|:-----------|:-------------|:--------|
| 1.0 | 2012-01-03 | 초안 작성 | 정철 | - |
| 1.1 | 2018-07-11 | 상용 URL 프로토콜 변경 | 송도화 | - |
| 1.2 | 2020-08-21 | 사명 변경 | 송도화 | - |

---

## 1️⃣ 개요

본 문서는 **㈜티사이언티픽의 모바일커머스 시스템과 연동에 필요한 쿠폰 취소 절차**를 기술한 문서이다.

### 🧭 Service Flow

Client → 서버 요청 → 쿠폰 검증 및 취소 처리 → 결과 리턴  

---

## 2️⃣ 시스템 정보

### ✅ 쿠폰취소 URL

| 구분 | URL | 비고 |
|:----|:----|:----|
| **상용 URL** | `https://corp.coufun.kr:446/b2c_api/coufunPartCancel.do` | - |
| **테스트 URL** | `https://tcorp.coufun.kr:446/b2c_api/coufunPartCancel.do` | - |

### ⚙️ 연동정보

- **HTTP POST 방식 호출**
- **XML 형식의 결과값 리턴**

### ⚠️ 유의사항

1. 반드시 **테스트 서버를 통해 연동 구현 후 상용 서버에 적용**  
2. **IP 등록이 필요하며, 미등록 시 사전 요청 필요**  

---

## 3️⃣ 연동 인터페이스

### 📄 정의

클라이언트의 쿠폰 취소 요청 데이터를 이용해 시스템이 데이터 검증 후 **정상 쿠폰인 경우 취소 처리 후 결과를 리턴**한다.

### 🌐 연동 URL (테스트용)

```
https://tcorp.coufun.kr:446/b2c_api/coufunPartCancel.do?Parameter
```

---

## 4️⃣ 요청 파라미터

| 변수명 | 설명 | 최대길이 | 체크 |
|:------|:------|:----------|:------|
| `POC_ID` | 고객사 ID | 10byte | 필수 |
| `GOODS_ID` | 판매상품 ID | 10byte | 필수 |
| `BARCODE_NUM` | 쿠폰번호 | 30byte | 필수 |

---

## 5️⃣ 응답 파라미터

| 변수명 | 설명 | 최대길이 |
|:------|:------|:----------|
| `RESULT_CODE` | 실행 결과 코드 | 2byte |
| `RESULT_MSG` | 실행 결과 메시지 | 100byte |
| `BARCODE_NUM` | 쿠폰번호 | 30byte |

---

## 6️⃣ 응답 예시

### ✅ 성공 시
```xml
<?xml version="1.0" encoding="EUC-KR"?>
<COUFUNCANCEL>
  <RESULT_CODE>00</RESULT_CODE>
  <RESULT_MSG>SUCCESS</RESULT_MSG>
  <BARCODE_NUM>ABC1234567890</BARCODE_NUM>
</COUFUNCANCEL>
```

### ❌ 실패 시
```xml
<?xml version="1.0" encoding="EUC-KR"?>
<COUFUNCANCEL>
  <RESULT_CODE>99</RESULT_CODE>
  <RESULT_MSG>ERROR MESSAGE</RESULT_MSG>
</COUFUNCANCEL>
```

---

## 7️⃣ 결과 코드 명세

별도 문서 참조:  
**`COUFUN_B2C_연동규격서_결과코드명세.pdf`**

---

## 8️⃣ 문의처

- **담당부서:** 전산운영팀  
- **이메일:** [devops@tscientific.co.kr](mailto:devops@tscientific.co.kr)
